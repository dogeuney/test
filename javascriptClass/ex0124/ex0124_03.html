<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <title>Document</title>
    <style>
        label{width: 80px; display: inline-block;}
        input{margin-bottom: 10px;}
        textarea{width: 400px; height: 200px; vertical-align: top;}
        table, th, td{border: 1px solid black; border-collapse: collapse; text-align: center;}
        th, td{height: 40px;}
        table{width: 1200px;}
        tr td{cursor: pointer;}
    </style>
    <script>
        var num = 0;
        $(function(){
            $("#num").val("1");
            $("#btn").click(function(){
                // alert("test")
                if ($.trim($("#id").val()) == ""){
                    alert("작성자를 입력하세요.");
                    $("#id").focus();
                    return false;
                } else if($.trim($("#title").val()) == ""){
                    alert("제목을 작성하세요.");
                    $("#title").focus();
                    return false;
                } else if($.trim($("#content").val()) == ""){
                    alert("내용을 작성하세요.");
                    $("#content").focus();
                    return false;
                };
                //각각 input 데이터 값을 가져오기
                num = Number($("#num").val());
                var id = $("#id").val();
                var title = $("#title").val();
                var content = $("#content").val();
                var c_date = $("#c_date").val();
                
                var htmldata = "";
                htmldata += "<tr id='" + num + "' onclick='hitCount("+num+")'>";
                htmldata += "<td>" + num + "</td>";
                htmldata += "<td>" + title + "</td>";
                htmldata += "<td>" + c_date + "</td>";
                htmldata += "<td>" + id + "</td>";
                htmldata += "<td>0</td>";
                htmldata += "</tr>";
                
                //데이터 html을 tbody에 넣기
                if(num == 1) $("#contxt").html(htmldata);
                else $("#contxt").prepend(htmldata);
                
                //번호를 1씩 증가시킴
                num++;
                //데이터를 입력한 후 초기화
                $("#num").val(num);
                var id = $("#id").val("");
                var title = $("#title").val("");
                var content = $("#content").val("");
                var c_date = $("#c_date").val("");
                
            });
        });
        
        function  hitCount(num){
            alert("호출된 번호 : " + num);
            alert("조회수 : " + $("#"+num+" td:nth-child(5)").text());
            $("#"+num+"td:nth-child(5)").text(Number($("#"+num+"td:nth-child(5)").text())+1);
        }
    </script>
</head>
<body>
    <form action="" method="post">
        <label>번호</label>
        <input type="text" name="num" id="num" readonly><br>
        <label>작성자</label>
        <input type="text" name="id" id="id"><br>
        <label>제목</label>
        <input type="text" name="title" id="title"><br>
        <label>내용</label>
        <textarea name="content" id="content" cols="30" rows="10"></textarea><br>
        <label>날짜</label>
        <input type="date" name="c_date" id="c_date"><br>
        <input type="button" id="btn" value="등록">
    </form>
    <br><br>
    <table>
        <thead>
            <tr>
                <th>번호</th>
                <th>제목</th>
                <th>날짜</th>
                <th>작성자</th>
                <th>조회수</th>
            </tr>
        </thead>
        <!-- 글자 등록 -->
        <tbody id="contxt">
            <tr>
                <td colspan="5">현재 데이터가 없습니다.</td>
            </tr>
        </tbody>
    </table>
    
</body>
</html>